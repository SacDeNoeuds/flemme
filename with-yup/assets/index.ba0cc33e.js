import{g as z,s as B,i as C,c as I,a as _,b as L,V as D}from"./vendor.66f9bc99.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}};K();const O=(r,t,s)=>{for(const i of r)t(i)&&s(i)},V=(r,t)=>O(r,t,s=>r.delete(s)),x=(r,t)=>{for(const s of r)if(t(s))return!0;return!1},R=({get:r,set:t,isEqual:s,cloneDeep:i})=>({initial:d,validate:f=()=>{},validationTriggers:p=[]})=>{let l=i(d),m=i(l);const b=new Set,k=new Map,v=new Set,F=new Set;let h=!1,c,S;const w={blur:[],change:[],focus:[],reset:[],validated:[]},q=new WeakMap,y=(e,n)=>w[e].forEach(a=>a(n)),u={initial:e=>e===void 0?l:r(l,e),value:e=>e===void 0?m:r(m,e),isDirty:e=>!s(u.value(e),u.initial(e)),isActive:e=>e?!!(c==null?void 0:c.startsWith(e)):!!c,isModified:e=>h?!0:e?x(b,n=>n.startsWith(e)):b.size>0,isVisited:e=>h?!0:e?x(v,n=>n.startsWith(e)):v.size>0,change:(...e)=>e.length===1?$(e[0]):P(e[0],e[1]),blur:e=>{c=void 0,y("blur",e)},focus:e=>{c=e,v.add(e),h&&F.add(e),y("focus",e)},reset:(e=l)=>{l=i(e),m=i(e),h=!1,b.clear(),v.clear(),S=void 0,c=void 0,y("reset",void 0)},resetAt:(...e)=>{const[n,a]=e;e.length===2&&t(l,n,a),t(m,n,r(l,n)),V(b,g=>g.startsWith(n)),V(v,g=>g.startsWith(n)),h=!1,(c==null?void 0:c.startsWith(n))&&(c=void 0),y("reset",n)},on:(e,n,a)=>a===void 0?A(e,n):N(e,n,a),off:(e,n)=>T(e,n),submit:async e=>{if(h=!0,u.validate(),!u.isValid())throw new Error("invalid form data");return e(u.value()).then(()=>u.reset(u.value())).finally(()=>j())},validate:()=>{S=f(m),y("validated",void 0)},errors:()=>S,isValid:()=>S===void 0},$=e=>{m=i(e),b.add(""),y("change",void 0)},P=(e,n)=>{t(m,e,n),b.add(e),h&&k.set(e,n),y("change",e)},A=(e,n)=>{const a=()=>n();q.set(n,a),w[e].push(a)},N=(e,n,a)=>{const E=g=>{(!g||g.startsWith(e))&&a()};q.set(a,E),w[n].push(E)},T=(e,n)=>{const a=q.get(n);w[e]=w[e].filter(E=>E!==a)},j=()=>{F.forEach(e=>v.add(e)),F.clear(),k.forEach((e,n)=>u.change(n,e)),k.clear()};return p.forEach(e=>{u.on(e,()=>u.validate())}),u},G=R({get:z,set:B,isEqual:C,cloneDeep:I}),H=r=>r==null,W=(r,t="Expected value to be defined")=>{if(H(r))throw new Error(t);return r},J=r=>new Promise(t=>setTimeout(t,r)),Q=_({username:L().min(4).max(233).required(),password:L().min(4).max(233).required(),confirmation:L().min(4).max(233).required()}),U={passwordMismatch:"passwordMismatch"},X=r=>{var t,s;try{const i=Q.validateSync(r),o=[];return i.password!==i.confirmation&&o.push({code:U.passwordMismatch,path:"confirmation"}),o.length===0?void 0:o}catch(i){return D.isError(i)?[{code:(t=i.type)!=null?t:"unknown_error",path:(s=i.path)!=null?s:""}]:[{code:"unknown_error",path:""}]}},Y=()=>G({initial:{},validate:X,validationTriggers:["change"]}),Z=async r=>{await J(750),console.info("Submitted:",r)},ee={passwordMismatch:"Passwords must match"},M=(r,t)=>{const s=W(document.querySelector(`input[name=${t}]`),`input "${t}" should be defined`),i=W(document.querySelector(`small#${t}-error`),`feedback "${t}" should be defined`);s.addEventListener("input",()=>r.change(t,s.value||void 0)),s.addEventListener("focus",()=>r.focus(t)),s.addEventListener("blur",()=>r.blur(t)),r.on("validated",()=>{var f;const d=((f=r.errors())!=null?f:[]).filter(({path:p})=>p===t).map(({code:p})=>{var l;return(l=ee[p.toString()])!=null?l:`Received error code "${p}"`});i.innerText=d.join(`
`)})};async function re(){const r=Y();M(r,"username"),M(r,"password"),M(r,"confirmation");const t=W(document.querySelector("form"),"Form should be defined"),s=W(document.querySelector(".dimmer"),"Dimmer should be defined");t.addEventListener("submit",i=>{i.preventDefault(),s.style.display="block",r.submit(Z).catch(o=>{console.error(o),alert("Submit failed")}).finally(()=>{s.style.display="none"})})}re().catch(r=>{console.error(r)});
