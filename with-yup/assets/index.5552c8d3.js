import{g as F,s as P,i as z,c as j,a as C,b as L,V as I}from"./vendor.66f9bc99.js";const _=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};_();const x=(t,r)=>((n,i,s)=>{for(const a of n)i(a)&&s(a)})(t,r,n=>t.delete(n)),D=(t,r)=>{for(const n of t)if(r(n))return!0;return!1},B=({get:t,set:r,isEqual:n,cloneDeep:i})=>({initial:s,validate:a=()=>{},validationTriggers:m=[]})=>{let d=i(s),f=i(d);const y=new Set,S=new Map,g=new Set,q=new Set;let l,E,p=!1;const b={blur:[],change:[],focus:[],reset:[],validated:[]},M=new WeakMap,v=(e,o)=>b[e].forEach(c=>c(o)),u={initial:e=>e===void 0?d:t(d,e),value:e=>e===void 0?f:t(f,e),isDirty:e=>!n(u.value(e),u.initial(e)),isActive:e=>e?!!(l==null?void 0:l.startsWith(e)):!!l,isModified:e=>!!p||(e?D(y,o=>o.startsWith(e)):y.size>0),isVisited:e=>!!p||(e?D(g,o=>o.startsWith(e)):g.size>0),change:(...e)=>e.length===1?V(e[0]):$(e[0],e[1]),blur:e=>{l=void 0,v("blur",e)},focus:e=>{l=e,g.add(e),p&&q.add(e),v("focus",e)},reset:(e=d)=>{d=i(e),f=i(e),p=!1,y.clear(),g.clear(),E=void 0,l=void 0,v("reset",void 0)},resetAt:(...e)=>{const[o,c]=e;e.length===2&&r(d,o,c),r(f,o,t(d,o)),x(y,h=>h.startsWith(o)),x(g,h=>h.startsWith(o)),p=!1,(l==null?void 0:l.startsWith(o))&&(l=void 0),v("reset",o)},on:(e,o,c)=>c===void 0?N(e,o):O(e,o,c),off:(e,o)=>T(e,o),submit:async e=>{if(p=!0,u.validate(),!u.isValid())throw new Error("invalid form data");return e(u.value()).then(()=>u.reset(u.value())).finally(()=>A())},validate:()=>{E=a(f),v("validated",void 0)},errors:()=>E,isValid:()=>E===void 0},V=e=>{f=i(e),y.add(""),v("change",void 0)},$=(e,o)=>{r(f,e,o),y.add(e),p&&S.set(e,o),v("change",e)},N=(e,o)=>{const c=()=>o();M.set(o,c),b[e].push(c)},O=(e,o,c)=>{const h=k=>{k&&!k.startsWith(e)||c()};M.set(c,h),b[o].push(h)},T=(e,o)=>{const c=M.get(o);b[e]=b[e].filter(h=>h!==c)},A=()=>{q.forEach(e=>g.add(e)),q.clear(),S.forEach((e,o)=>u.change(o,e)),S.clear()};return m.forEach(e=>{u.on(e,()=>u.validate())}),u},J=B({get:F,set:P,isEqual:z,cloneDeep:j}),K=t=>t==null,w=(t,r="Expected value to be defined")=>{if(K(t))throw new Error(r);return t},R=t=>new Promise(r=>setTimeout(r,t)),G=C({username:L().min(4).max(233).required(),password:L().min(4).max(233).required(),confirmation:L().min(4).max(233).required()}),H={passwordMismatch:"passwordMismatch"},Q=t=>{var r,n;try{const i=G.validateSync(t),s=[];return i.password!==i.confirmation&&s.push({code:H.passwordMismatch,path:"confirmation"}),s.length===0?void 0:s}catch(i){return I.isError(i)?[{code:(r=i.type)!=null?r:"unknown_error",path:(n=i.path)!=null?n:""}]:[{code:"unknown_error",path:""}]}},U=()=>J({initial:{},validate:Q,validationTriggers:["change"]}),X=async t=>{await R(750),console.info("Submitted:",t);const r=w(document.querySelector("#output"),"output should be defined");r.innerText=JSON.stringify(t,null,2)},Y={passwordMismatch:"Passwords must match"},W=(t,r)=>{const n=w(document.querySelector(`input[name=${r}]`),`input "${r}" should be defined`),i=w(document.querySelector(`small#${r}-error`),`feedback "${r}" should be defined`);n.addEventListener("input",()=>t.change(r,n.value||void 0)),n.addEventListener("focus",()=>t.focus(r)),n.addEventListener("blur",()=>t.blur(r)),t.on("validated",()=>{var m;const a=((m=t.errors())!=null?m:[]).filter(({path:d})=>d===r).map(({code:d})=>{var f;return(f=Y[d.toString()])!=null?f:`Received error code "${d}"`});i.innerText=a.join(`
`)})};async function Z(){const t=U();W(t,"username"),W(t,"password"),W(t,"confirmation");const r=w(document.querySelector("form"),"Form should be defined"),n=w(document.querySelector(".dimmer"),"Dimmer should be defined");r.addEventListener("submit",i=>{i.preventDefault(),n.style.display="block",t.submit(X).catch(s=>{console.error(s),alert("Submit failed")}).finally(()=>{n.style.display="none"})})}Z().catch(t=>{console.error(t)});
