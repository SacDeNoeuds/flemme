import{g as P,s as T,i as z,c as j,a as C,b as L,V as I}from"./vendor.66f9bc99.js";const _=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};_();const D=(t,o)=>((n,i,s)=>{for(const a of n)i(a)&&s(a)})(t,o,n=>t.delete(n)),V=(t,o)=>{for(const n of t)if(o(n))return!0;return!1},B=({get:t,set:o,isEqual:n,cloneDeep:i})=>({initial:s,validate:a=()=>{},validationTriggers:m=[]})=>{let d=i(s),f=i(d);const y=new Set,S=new Map,g=new Set,q=new Set;let l,w,p=!1;const b={blur:[],change:[],focus:[],reset:[],validated:[]},M=new WeakMap,v=(e,r)=>b[e].forEach(c=>c(r)),u={initial:e=>e===void 0?d:t(d,e),value:e=>e===void 0?f:t(f,e),isDirty:e=>!n(u.value(e),u.initial(e)),isActive:e=>e?!!(l==null?void 0:l.startsWith(e)):!!l,isModified:e=>!!p||(e?V(y,r=>r.startsWith(e)):y.size>0),isVisited:e=>!!p||(e?V(g,r=>r.startsWith(e)):g.size>0),change:(...e)=>e.length===1?$(e[0]):x(e[0],e[1]),blur:e=>{l=void 0,v("blur",e)},focus:e=>{l=e,g.add(e),p&&q.add(e),v("focus",e)},reset:(e=d)=>{d=i(e),f=i(e),p=!1,y.clear(),g.clear(),w=void 0,l=void 0,v("reset",void 0)},resetAt:(...e)=>{const[r,c]=e;e.length===2&&o(d,r,c),o(f,r,t(d,r)),D(y,h=>h.startsWith(r)),D(g,h=>h.startsWith(r)),p=!1,(l==null?void 0:l.startsWith(r))&&(l=void 0),v("reset",r)},on:(e,r,c)=>c===void 0?A(e,r):F(e,r,c),off:(e,r)=>N(e,r),submit:async e=>{if(p=!0,u.validate(),!u.isValid())throw new Error("invalid form data");return e(u.value()).then(()=>u.reset(u.value())).finally(()=>O())},validate:()=>{w=a(f),v("validated",void 0)},errors:()=>w,isValid:()=>w===void 0},$=e=>{f=i(e),y.add(""),v("change",void 0)},x=(e,r)=>{o(f,e,r),y.add(e),p&&S.set(e,r),v("change",e)},A=(e,r)=>{const c=()=>r();M.set(r,c),b[e].push(c)},F=(e,r,c)=>{const h=k=>{k&&!k.startsWith(e)||c()};M.set(c,h),b[r].push(h)},N=(e,r)=>{const c=M.get(r);b[e]=b[e].filter(h=>h!==c)},O=()=>{q.forEach(e=>g.add(e)),q.clear(),S.forEach((e,r)=>u.change(r,e)),S.clear()};return m.forEach(e=>{u.on(e,()=>u.validate())}),u},K=B({get:P,set:T,isEqual:z,cloneDeep:j}),R=t=>t==null,E=(t,o="Expected value to be defined")=>{if(R(t))throw new Error(o);return t},G=t=>new Promise(o=>setTimeout(o,t)),H=C({username:L().min(4).max(233).required(),password:L().min(4).max(233).required(),confirmation:L().min(4).max(233).required()}),J={passwordMismatch:"passwordMismatch"},Q=t=>{var o,n;try{const i=H.validateSync(t),s=[];return i.password!==i.confirmation&&s.push({code:J.passwordMismatch,path:"confirmation"}),s.length===0?void 0:s}catch(i){return I.isError(i)?[{code:(o=i.type)!=null?o:"unknown_error",path:(n=i.path)!=null?n:""}]:[{code:"unknown_error",path:""}]}},U=()=>K({initial:{},validate:Q,validationTriggers:["change"]}),X=async t=>{await G(750),console.info("Submitted:",t)},Y={passwordMismatch:"Passwords must match"},W=(t,o)=>{const n=E(document.querySelector(`input[name=${o}]`),`input "${o}" should be defined`),i=E(document.querySelector(`small#${o}-error`),`feedback "${o}" should be defined`);n.addEventListener("input",()=>t.change(o,n.value||void 0)),n.addEventListener("focus",()=>t.focus(o)),n.addEventListener("blur",()=>t.blur(o)),t.on("validated",()=>{var m;const a=((m=t.errors())!=null?m:[]).filter(({path:d})=>d===o).map(({code:d})=>{var f;return(f=Y[d.toString()])!=null?f:`Received error code "${d}"`});i.innerText=a.join(`
`)})};async function Z(){const t=U();W(t,"username"),W(t,"password"),W(t,"confirmation");const o=E(document.querySelector("form"),"Form should be defined"),n=E(document.querySelector(".dimmer"),"Dimmer should be defined");o.addEventListener("submit",i=>{i.preventDefault(),n.style.display="block",t.submit(X).catch(s=>{console.error(s),alert("Submit failed")}).finally(()=>{n.style.display="none"})})}Z().catch(t=>{console.error(t)});
