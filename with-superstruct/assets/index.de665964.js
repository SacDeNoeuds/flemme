import{m as V,a as x,f as C,c as I,o as B,s as L,b as W}from"./vendor.6a681271.js";const J=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}};J();const k=(t,r)=>((i,n,s)=>{for(const a of i)n(a)&&s(a)})(t,r,i=>t.delete(i)),N=(t,r)=>{for(const i of t)if(r(i))return!0;return!1},K=({get:t,set:r,isEqual:i,cloneDeep:n})=>({initial:s,validate:a=()=>{},validationTriggers:m=[]})=>{let d=n(s),f=n(d);const y=new Set,S=new Map,g=new Set,M=new Set;let l,E,p=!1;const b={blur:[],change:[],focus:[],reset:[],validated:[]},q=new WeakMap,v=(e,o)=>b[e].forEach(c=>c(o)),u={initial:e=>e===void 0?d:t(d,e),value:e=>e===void 0?f:t(f,e),isDirty:e=>!i(u.value(e),u.initial(e)),isActive:e=>e?!!(l==null?void 0:l.startsWith(e)):!!l,isModified:e=>!!p||(e?N(y,o=>o.startsWith(e)):y.size>0),isVisited:e=>!!p||(e?N(g,o=>o.startsWith(e)):g.size>0),change:(...e)=>e.length===1?T(e[0]):j(e[0],e[1]),blur:e=>{l=void 0,v("blur",e)},focus:e=>{l=e,g.add(e),p&&M.add(e),v("focus",e)},reset:(e=d)=>{d=n(e),f=n(e),p=!1,y.clear(),g.clear(),E=void 0,l=void 0,v("reset",void 0)},resetAt:(...e)=>{const[o,c]=e;e.length===2&&r(d,o,c),r(f,o,t(d,o)),k(y,h=>h.startsWith(o)),k(g,h=>h.startsWith(o)),p=!1,(l==null?void 0:l.startsWith(o))&&(l=void 0),v("reset",o)},on:(e,o,c)=>c===void 0?z(e,o):A(e,o,c),off:(e,o)=>F(e,o),submit:async e=>{if(p=!0,u.validate(),!u.isValid())throw new Error("invalid form data");return e(u.value()).then(()=>u.reset(u.value())).finally(()=>P())},validate:()=>{E=a(f),v("validated",void 0)},errors:()=>E,isValid:()=>E===void 0},T=e=>{f=n(e),y.add(""),v("change",void 0)},j=(e,o)=>{r(f,e,o),y.add(e),p&&S.set(e,o),v("change",e)},z=(e,o)=>{const c=()=>o();q.set(o,c),b[e].push(c)},A=(e,o,c)=>{const h=$=>{$&&!$.startsWith(e)||c()};q.set(c,h),b[o].push(h)},F=(e,o)=>{const c=q.get(o);b[e]=b[e].filter(h=>h!==c)},P=()=>{M.forEach(e=>g.add(e)),M.clear(),S.forEach((e,o)=>u.change(o,e)),S.clear()};return m.forEach(e=>{u.on(e,()=>u.validate())}),u},R=K({get:V,set:x,isEqual:C,cloneDeep:I}),_=t=>t==null,w=(t,r="Expected value to be defined")=>{if(_(t))throw new Error(r);return t},G=t=>new Promise(r=>setTimeout(r,t)),O=B({username:L(W(),4,233),password:L(W(),4,233),confirmation:L(W(),4,233)}),H={passwordMismatch:"passwordMismatch"},Q=t=>{const[r]=O.validate(t);if(r)return r.failures().map(n=>{var s;return{code:(s=n.refinement)!=null?s:n.type,path:n.path.join("."),failure:n}});O.assert(t);const i=[];return t.password!==t.confirmation&&i.push({code:H.passwordMismatch,path:"confirmation"}),i.length===0?void 0:i},U=()=>R({initial:{},validate:Q,validationTriggers:["change"]}),X=async t=>{await G(750),console.info("Submitted:",t);const r=w(document.querySelector("#output"),"output should be defined");r.innerText=JSON.stringify(t,null,2)},Y={passwordMismatch:"Passwords must match"},D=(t,r)=>{const i=w(document.querySelector(`input[name=${r}]`),`input "${r}" should be defined`),n=w(document.querySelector(`small#${r}-error`),`feedback "${r}" should be defined`);i.addEventListener("input",()=>t.change(r,i.value||void 0)),i.addEventListener("focus",()=>t.focus(r)),i.addEventListener("blur",()=>t.blur(r)),t.on("validated",()=>{var m;const a=((m=t.errors())!=null?m:[]).filter(({path:d})=>d===r).map(({code:d})=>{var f;return(f=Y[d.toString()])!=null?f:`Received error code "${d}"`});n.innerText=a.join(`
`)})};async function Z(){const t=U();D(t,"username"),D(t,"password"),D(t,"confirmation");const r=w(document.querySelector("form"),"Form should be defined"),i=w(document.querySelector(".dimmer"),"Dimmer should be defined");r.addEventListener("submit",n=>{n.preventDefault(),i.style.display="block",t.submit(X).catch(s=>{console.error(s),alert("Submit failed")}).finally(()=>{i.style.display="none"})})}Z().catch(t=>{console.error(t)});
