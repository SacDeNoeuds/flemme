import{g as C,s as I,i as D,c as K,o as O,a as k,b as q}from"./vendor.0da8fdaf.js";const R=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}};R();const G=(t,r,s)=>{for(const i of t)r(i)&&s(i)},$=(t,r)=>G(t,r,s=>t.delete(s)),j=(t,r)=>{for(const s of t)if(r(s))return!0;return!1},H=({get:t,set:r,isEqual:s,cloneDeep:i})=>({initial:d,validate:f=()=>{},validationTriggers:y=[]})=>{let l=i(d),m=i(l);const b=new Set,F=new Map,g=new Set,L=new Set;let h=!1,a,S;const w={blur:[],change:[],focus:[],reset:[],validated:[]},M=new WeakMap,p=(e,n)=>w[e].forEach(c=>c(n)),u={initial:e=>e===void 0?l:t(l,e),value:e=>e===void 0?m:t(m,e),isDirty:e=>!s(u.value(e),u.initial(e)),isActive:e=>e?!!(a==null?void 0:a.startsWith(e)):!!a,isModified:e=>h?!0:e?j(b,n=>n.startsWith(e)):b.size>0,isVisited:e=>h?!0:e?j(g,n=>n.startsWith(e)):g.size>0,change:(...e)=>e.length===1?P(e[0]):z(e[0],e[1]),blur:e=>{a=void 0,p("blur",e)},focus:e=>{a=e,g.add(e),h&&L.add(e),p("focus",e)},reset:(e=l)=>{l=i(e),m=i(e),h=!1,b.clear(),g.clear(),S=void 0,a=void 0,p("reset",void 0)},resetAt:(...e)=>{const[n,c]=e;e.length===2&&r(l,n,c),r(m,n,t(l,n)),$(b,v=>v.startsWith(n)),$(g,v=>v.startsWith(n)),h=!1,(a==null?void 0:a.startsWith(n))&&(a=void 0),p("reset",n)},on:(e,n,c)=>c===void 0?A(e,n):N(e,n,c),off:(e,n)=>T(e,n),submit:async e=>{if(h=!0,u.validate(),!u.isValid())throw new Error("invalid form data");return e(u.value()).then(()=>u.reset(u.value())).finally(()=>B())},validate:()=>{S=f(m),p("validated",void 0)},errors:()=>S,isValid:()=>S===void 0},P=e=>{m=i(e),b.add(""),p("change",void 0)},z=(e,n)=>{r(m,e,n),b.add(e),h&&F.set(e,n),p("change",e)},A=(e,n)=>{const c=()=>n();M.set(n,c),w[e].push(c)},N=(e,n,c)=>{const E=v=>{(!v||v.startsWith(e))&&c()};M.set(c,E),w[n].push(E)},T=(e,n)=>{const c=M.get(n);w[e]=w[e].filter(E=>E!==c)},B=()=>{L.forEach(e=>g.add(e)),L.clear(),F.forEach((e,n)=>u.change(n,e)),F.clear()};return y.forEach(e=>{u.on(e,()=>u.validate())}),u},J=H({get:C,set:I,isEqual:D,cloneDeep:K}),Q=t=>t==null,W=(t,r="Expected value to be defined")=>{if(Q(t))throw new Error(r);return t},U=t=>new Promise(r=>setTimeout(r,t)),x=O({username:k(q(),4,233),password:k(q(),4,233),confirmation:k(q(),4,233)}),X={passwordMismatch:"passwordMismatch"},Y=t=>{const[r]=x.validate(t);if(r)return r.failures().map(i=>{var o;return{code:(o=i.refinement)!=null?o:i.type,path:i.path.join("."),failure:i}});x.assert(t);const s=[];return t.password!==t.confirmation&&s.push({code:X.passwordMismatch,path:"confirmation"}),s.length===0?void 0:s},Z=()=>J({initial:{},validate:Y,validationTriggers:["change"]}),_=async t=>{await U(750),console.info("Submitted:",t)},ee={passwordMismatch:"Passwords must match"},V=(t,r)=>{const s=W(document.querySelector(`input[name=${r}]`),`input "${r}" should be defined`),i=W(document.querySelector(`small#${r}-error`),`feedback "${r}" should be defined`);s.addEventListener("input",()=>t.change(r,s.value||void 0)),s.addEventListener("focus",()=>t.focus(r)),s.addEventListener("blur",()=>t.blur(r)),t.on("validated",()=>{var f;const d=((f=t.errors())!=null?f:[]).filter(({path:y})=>y===r).map(({code:y})=>{var l;return(l=ee[y.toString()])!=null?l:`Received error code "${y}"`});i.innerText=d.join(`
`)})};async function te(){const t=Z();V(t,"username"),V(t,"password"),V(t,"confirmation");const r=W(document.querySelector("form"),"Form should be defined"),s=W(document.querySelector(".dimmer"),"Dimmer should be defined");r.addEventListener("submit",i=>{i.preventDefault(),s.style.display="block",t.submit(_).catch(o=>{console.error(o),alert("Submit failed")}).finally(()=>{s.style.display="none"})})}te().catch(t=>{console.error(t)});
