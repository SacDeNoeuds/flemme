var R=Object.defineProperty;var E=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var x=(t,r,o)=>r in t?R(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,P=(t,r)=>{for(var o in r||(r={}))j.call(r,o)&&x(t,o,r[o]);if(E)for(var o of E(r))k.call(r,o)&&x(t,o,r[o]);return t};var $=(t,r)=>{var o={};for(var i in t)j.call(t,i)&&r.indexOf(i)<0&&(o[i]=t[i]);if(t!=null&&E)for(var i of E(t))r.indexOf(i)<0&&k.call(t,i)&&(o[i]=t[i]);return o};import{o as A,l as F,a as G,s as q}from"./vendor.88510618.js";const H=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}};H();const N=(t,r)=>((o,i,n)=>{for(const a of o)i(a)&&n(a)})(t,r,o=>t.delete(o)),O=(t,r)=>{for(const o of t)if(r(o))return!0;return!1},J=({get:t,set:r,isEqual:o,cloneDeep:i})=>({initial:n,validate:a=()=>{},validationTriggers:m=[]})=>{let c=i(n),f=i(c);const g=new Set,M=new Map,y=new Set,L=new Set;let l,w,p=!1;const b={blur:[],change:[],focus:[],reset:[],validated:[]},W=new WeakMap,v=(e,s)=>b[e].forEach(d=>d(s)),u={initial:e=>e===void 0?c:t(c,e),value:e=>e===void 0?f:t(f,e),isDirty:e=>!o(u.value(e),u.initial(e)),isActive:e=>e?!!(l==null?void 0:l.startsWith(e)):!!l,isModified:e=>!!p||(e?O(g,s=>s.startsWith(e)):g.size>0),isVisited:e=>!!p||(e?O(y,s=>s.startsWith(e)):y.size>0),change:(...e)=>e.length===1?V(e[0]):z(e[0],e[1]),blur:e=>{l=void 0,v("blur",e)},focus:e=>{l=e,y.add(e),p&&L.add(e),v("focus",e)},reset:(e=c)=>{c=i(e),f=i(e),p=!1,g.clear(),y.clear(),w=void 0,l=void 0,v("reset",void 0)},resetAt:(...e)=>{const[s,d]=e;e.length===2&&r(c,s,d),r(f,s,t(c,s)),N(g,h=>h.startsWith(s)),N(y,h=>h.startsWith(s)),p=!1,(l==null?void 0:l.startsWith(s))&&(l=void 0),v("reset",s)},on:(e,s,d)=>d===void 0?C(e,s):I(e,s,d),off:(e,s)=>B(e,s),submit:async e=>{if(p=!0,u.validate(),!u.isValid())throw new Error("invalid form data");return e(u.value()).then(()=>u.reset(u.value())).finally(()=>K())},validate:()=>{w=a(f),v("validated",void 0)},errors:()=>w,isValid:()=>w===void 0},V=e=>{f=i(e),g.add(""),v("change",void 0)},z=(e,s)=>{r(f,e,s),g.add(e),p&&M.set(e,s),v("change",e)},C=(e,s)=>{const d=()=>s();W.set(s,d),b[e].push(d)},I=(e,s,d)=>{const h=T=>{T&&!T.startsWith(e)||d()};W.set(d,h),b[s].push(h)},B=(e,s)=>{const d=W.get(s);b[e]=b[e].filter(h=>h!==d)},K=()=>{L.forEach(e=>y.add(e)),L.clear(),M.forEach((e,s)=>u.change(s,e)),M.clear()};return m.forEach(e=>{u.on(e,()=>u.validate())}),u},Q=J({get:A.get,set:A.set,isEqual:F.deepEquals,cloneDeep:F.deepClone}),U=t=>t==null,S=(t,r="Expected value to be defined")=>{if(U(t))throw new Error(r);return t},X=t=>new Promise(r=>setTimeout(r,t)),Y=G({username:q().min(4).max(233),password:q().min(4).max(233),confirmation:q().min(4).max(233)}),Z={passwordMismatch:"passwordMismatch"},_=t=>{const r=Y.safeParse(t);if(!r.success)return r.error.errors.map(m=>{var c=m,{code:i,path:n}=c,a=$(c,["code","path"]);return P({code:i,path:n.join(".")},a)});const o=[];return r.data.password!==r.data.confirmation&&o.push({code:Z.passwordMismatch,path:"confirmation"}),o.length===0?void 0:o},ee=()=>Q({initial:{},validate:_,validationTriggers:["change"]}),te=async t=>{await X(750),console.info("Submitted:",t)},re={passwordMismatch:"Passwords must match"},D=(t,r)=>{const o=S(document.querySelector(`input[name=${r}]`),`input "${r}" should be defined`),i=S(document.querySelector(`small#${r}-error`),`feedback "${r}" should be defined`);o.addEventListener("input",()=>t.change(r,o.value||void 0)),o.addEventListener("focus",()=>t.focus(r)),o.addEventListener("blur",()=>t.blur(r)),t.on("validated",()=>{var m;const a=((m=t.errors())!=null?m:[]).filter(({path:c})=>c===r).map(({code:c})=>{var f;return(f=re[c.toString()])!=null?f:`Received error code "${c}"`});i.innerText=a.join(`
`)})};async function oe(){const t=ee();D(t,"username"),D(t,"password"),D(t,"confirmation");const r=S(document.querySelector("form"),"Form should be defined"),o=S(document.querySelector(".dimmer"),"Dimmer should be defined");r.addEventListener("submit",i=>{i.preventDefault(),o.style.display="block",t.submit(te).catch(n=>{console.error(n),alert("Submit failed")}).finally(()=>{o.style.display="none"})})}oe().catch(t=>{console.error(t)});
