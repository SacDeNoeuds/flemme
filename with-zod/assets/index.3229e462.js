var O=Object.defineProperty;var W=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var T=(t,r,n)=>r in t?O(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,$=(t,r)=>{for(var n in r||(r={}))V.call(r,n)&&T(t,n,r[n]);if(W)for(var n of W(r))P.call(r,n)&&T(t,n,r[n]);return t};var j=(t,r)=>{var n={};for(var o in t)V.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&W)for(var o of W(t))r.indexOf(o)<0&&P.call(t,o)&&(n[o]=t[o]);return n};import{g as R,s as G,i as H,c as J,o as Q,a as x}from"./vendor.4cf44ae0.js";const U=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerpolicy&&(d.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?d.credentials="include":i.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(i){if(i.ep)return;i.ep=!0;const d=n(i);fetch(i.href,d)}};U();const X=(t,r,n)=>{for(const o of t)r(o)&&n(o)},A=(t,r)=>X(t,r,n=>t.delete(n)),N=(t,r)=>{for(const n of t)if(r(n))return!0;return!1},Y=({get:t,set:r,isEqual:n,cloneDeep:o})=>({initial:d,validate:f=()=>{},validationTriggers:m=[]})=>{let l=o(d),h=o(l);const b=new Set,L=new Map,g=new Set,M=new Set;let y=!1,c,E;const w={blur:[],change:[],focus:[],reset:[],validated:[]},k=new WeakMap,p=(e,s)=>w[e].forEach(a=>a(s)),u={initial:e=>e===void 0?l:t(l,e),value:e=>e===void 0?h:t(h,e),isDirty:e=>!n(u.value(e),u.initial(e)),isActive:e=>e?!!(c==null?void 0:c.startsWith(e)):!!c,isModified:e=>y?!0:e?N(b,s=>s.startsWith(e)):b.size>0,isVisited:e=>y?!0:e?N(g,s=>s.startsWith(e)):g.size>0,change:(...e)=>e.length===1?z(e[0]):B(e[0],e[1]),blur:e=>{c=void 0,p("blur",e)},focus:e=>{c=e,g.add(e),y&&M.add(e),p("focus",e)},reset:(e=l)=>{l=o(e),h=o(e),y=!1,b.clear(),g.clear(),E=void 0,c=void 0,p("reset",void 0)},resetAt:(...e)=>{const[s,a]=e;e.length===2&&r(l,s,a),r(h,s,t(l,s)),A(b,v=>v.startsWith(s)),A(g,v=>v.startsWith(s)),y=!1,(c==null?void 0:c.startsWith(s))&&(c=void 0),p("reset",s)},on:(e,s,a)=>a===void 0?C(e,s):I(e,s,a),off:(e,s)=>D(e,s),submit:async e=>{if(y=!0,u.validate(),!u.isValid())throw new Error("invalid form data");return e(u.value()).then(()=>u.reset(u.value())).finally(()=>K())},validate:()=>{E=f(h),p("validated",void 0)},errors:()=>E,isValid:()=>E===void 0},z=e=>{h=o(e),b.add(""),p("change",void 0)},B=(e,s)=>{r(h,e,s),b.add(e),y&&L.set(e,s),p("change",e)},C=(e,s)=>{const a=()=>s();k.set(s,a),w[e].push(a)},I=(e,s,a)=>{const S=v=>{(!v||v.startsWith(e))&&a()};k.set(a,S),w[s].push(S)},D=(e,s)=>{const a=k.get(s);w[e]=w[e].filter(S=>S!==a)},K=()=>{M.forEach(e=>g.add(e)),M.clear(),L.forEach((e,s)=>u.change(s,e)),L.clear()};return m.forEach(e=>{u.on(e,()=>u.validate())}),u},Z=Y({get:R,set:G,isEqual:H,cloneDeep:J}),_=t=>t==null,F=(t,r="Expected value to be defined")=>{if(_(t))throw new Error(r);return t},ee=t=>new Promise(r=>setTimeout(r,t)),te=Q({username:x().min(4).max(233),password:x().min(4).max(233),confirmation:x().min(4).max(233)}),re={passwordMismatch:"passwordMismatch"},ne=t=>{const r=te.safeParse(t);if(!r.success)return r.error.errors.map(f=>{var m=f,{code:o,path:i}=m,d=j(m,["code","path"]);return $({code:o,path:i.join(".")},d)});const n=[];return r.data.password!==r.data.confirmation&&n.push({code:re.passwordMismatch,path:"confirmation"}),n.length===0?void 0:n},se=()=>Z({initial:{},validate:ne,validationTriggers:["change"]}),oe=async t=>{await ee(750),console.info("Submitted:",t)},ie={passwordMismatch:"Passwords must match"},q=(t,r)=>{const n=F(document.querySelector(`input[name=${r}]`),`input "${r}" should be defined`),o=F(document.querySelector(`small#${r}-error`),`feedback "${r}" should be defined`);n.addEventListener("input",()=>t.change(r,n.value||void 0)),n.addEventListener("focus",()=>t.focus(r)),n.addEventListener("blur",()=>t.blur(r)),t.on("validated",()=>{var f;const d=((f=t.errors())!=null?f:[]).filter(({path:m})=>m===r).map(({code:m})=>{var l;return(l=ie[m.toString()])!=null?l:`Received error code "${m}"`});o.innerText=d.join(`
`)})};async function de(){const t=se();q(t,"username"),q(t,"password"),q(t,"confirmation");const r=F(document.querySelector("form"),"Form should be defined"),n=F(document.querySelector(".dimmer"),"Dimmer should be defined");r.addEventListener("submit",o=>{o.preventDefault(),n.style.display="block",t.submit(oe).catch(i=>{console.error(i),alert("Submit failed")}).finally(()=>{n.style.display="none"})})}de().catch(t=>{console.error(t)});
